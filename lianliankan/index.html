<!DOCTYPE html>
<html>
<head> 
<meta charset="utf-8"> 
<link rel="stylesheet" type="text/css" href="llk.css">
<title>lianliankan_Demo</title> 
</head>
<body>
	<div class="fangge">
        <script>
            
            function $(x){
                return document.getElementById(x);
            }

            function add_playvoice(x){
                $(x).addEventListener("click",function(){
                    $("mp3").play();
                });
                
            }

            function add_botderStyle(x){
                $(x).style.borderStyle="solid";
                $(x).style.borderWidth="2px";
                $(x).style.borderColor="#9c3f00";
                $(x).style.boxSizing="border-box";
                $(x).style.borderRadius="10px";
            }

            function remove_botderStyle(x){
                $(x).style.borderStyle="none";
            }

            function remove_playvoice(x){
                $(x).removeEventListener("click",add_playvoice);
            }

            var rows=5,cells=6;
            var len=rows*cells;
            var arr=[];
            for(var i=0;i<len/2;i++){
                arr[i]=i;
                arr[len/2+i]=i;
            }
            function randomSort(a, b) { return Math.random() > 0.5 ? -1 : 1; }
            arr.sort(randomSort);
        </script>
        <script>
            var z=0;
            var y=0;
            var str="";
            for( var i=0;i<rows;i++){
                str+="<div class='con'>";
                for(var j=0;j<cells;j++){
                    ++y;
                    str+="<img id='fg"+((i*5)+y)+"' onclick='dianji("+((i*5)+y)+")' src='img/"+arr[z++]+".jpg'>";
                }
                str+="</div>";
            }
            document.write(str);
        </script>
        
    </div>
    <audio id="fail" src="img/fail.mp3" ></audio>
    <audio id="success" src="img/success.mp3" ></audio>
    
    <script>

        var duibi="";
        var id="";
        var index=0;

        

        function dianji(x){
            var imgget="";
            add_botderStyle("fg"+x);
            if(duibi==""){
                duibi=$("fg"+x).getAttribute('src');
                id=x;
            }else{
                if(id==x){
                    $("fg"+x).style.animationName="no_pipei";
                    $("fg"+x).style.animationDuration=".3s";
                    $("fail").play();
                    setTimeout(function(){
                        remove_botderStyle("fg"+x);
                    }, 300);
                }else{
                    imgget=$("fg"+x).getAttribute('src');
                    if(duibi==imgget){
                        $("fg"+x).style.visibility="hidden";
                        $("fg"+id).style.visibility="hidden";
                        $("success").play();
                        index=index+2;
                        
                    }else{
                        $("fg"+x).style.animationName="no_pipei";
                        $("fg"+x).style.animationDuration=".3s";
                        $("fg"+id).style.animationName="no_pipei";
                        $("fg"+id).style.animationDuration=".3s";
                        $("fail").play();
                        
                    }
                    
                }
                
                
                setTimeout(function(){
                    $("fg"+id).style.animationName="";
                    $("fg"+x).style.animationName="";
                    remove_botderStyle("fg"+id);
                    remove_botderStyle("fg"+x);

                }, 300);
                
               //临时办法，利用时间差
                setTimeout(function(){
                    duibi="";
                    id="";
                }, 400);
                    
                
                
                
            }
            
            if(index==len){
                
                // setTimeout(()=>{
                //     alert("恭喜通过！！！再来一次");
                //     location.reload();
                // },300)

                setTimeout(function(){
                    alert("恭喜通过！！！再来一次");
                    location.reload();
                },200)

            }
        
        }

    </script>

</body>
</html>