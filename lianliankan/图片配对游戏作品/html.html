<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	table{
		text-align: center;
		font-size: 30px;
	}
	   h2{
	   	text-align: center;
	   	padding: 5px;
	   }
	   hr{
	   	width: 500px;
	   	height: 10px;
	   	background: red;
	   }
	   div{
	   	width: 420px;
	   	background: red;
	   	padding: 5px;
	   	text-align: center;
	   	margin: 10px auto;
	   }
	   img{
	   	width: 60px;
	   	height: 100px
	   }
	</style>
</head>
<body>
	<h2>配对游戏<br><hr></h2>
	<table border="1" style="margin: 0 auto;">
		<script>
			var rows=4,cells=5
			var str="";
			for (var i = 0; i < rows; i++) {
				str+="<tr>"
				for (var j = 0; j < cells; j++) {
					str+="<td id='td"+((i*5)+j+1)+"' style='background:green;width:80px;height:120px' onclick='boss("+((i*5)+j+1)+")'>"+"</td>"
				}
				str+="</tr>"
			}
	    document.write(str)  
		</script>
	</table>
	<div><span id="span">用时:0秒</span>&nbsp&nbsp&nbsp<input type="button" value="开始游戏" onclick="start()"></div>
</body>
	<script>
	   var len=rows*cells
	   var arr=[]
	   var user=[]
	   var times=0
	   var boo=false
	   var art=0;
	   var indexFrist
	   var indexSecond
	   var finished;
	   var starttime;
	   var Boo=false
		function $(x){
			return document.getElementById(x)
		}  
      for (var i = 0; i < len/2; i++) {
      	// arr[i]=i
      	// arr[len/2+i]=i
      	arr[i]="<img src='image/"+i+".png' ale=''>"
      	arr[len/2+i]="<img src='image/"+i+".png' ale=''>"
      }
   function start(){
  	for (var i = 0; i < len; i++) {
    		$("td"+(i+1)).innerHTML=""
            user[i]=0
    	}
        arr.sort(function(){
        	return (Math.random()-0.5)
        })
        finished=0
        times=0;
        $("span").innerHTML="用时:"+times+"秒"
        boo=true;
        Boo=true
   }
 function pan(){
 		$("span").innerHTML="用时:"+times+"秒"
 		times++
 		starttime=setTimeout("pan()",1000)	
 }
  function boss(x){
  	if (boo) {
  		 pan()
  		 boo=false
  	}
  	if (Boo) {
    	if (art==0) {
    	$("td"+x).innerHTML=arr[x-1]
    	indexFrist=x-1   	
    	art++ 
    	}else{
    	if (indexFrist!=x-1) {
    	$("td"+x).innerHTML=arr[x-1]
    	indexSecond=x-1
    	art=0;
    	check()	
          }
    	}
  }
function check(){
	if (arr[indexFrist]==arr[indexSecond]) {
		finished++
		user[indexFrist]=1;
		user[indexSecond]=1;
		art=0
	}else if(user[indexFrist]==0){
		$("td"+(indexFrist+1)).innerHTML=""
		indexFrist=indexSecond;
		indexSecond=0;
		art++
	}
	if (finished==len/2) {
		clearTimeout(starttime)
		if (confirm("恭喜您,再来一次?")) {
			window.location.reload()
		} else {
			alert("sb,这么好玩")
		}
	}
	}
}
	</script>
</html>